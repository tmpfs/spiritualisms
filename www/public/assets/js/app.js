require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){module.exports={type:"object",fields:{type:{type:"string",required:true},publish:{type:"boolean"},quote:{type:"string",required:true},author:{type:"string",required:true},link:[{type:"string",required:true}],domain:[{type:"string"}],created:{type:"integer",required:true},random:{type:"float",required:true},tags:{type:"array"}}}},{}],2:[function(require,module,exports){(function(){"use strict";var plug=require("zephyr");function Air(el,context){if(!(this instanceof Air)){return new Air(el,context)}if(typeof context==="string"){context=document.querySelector(context)}else if(context instanceof Air){context=context.get(0)}context=context||document;if(!arguments.length||el===""){this.dom=[]}else{this.dom=typeof el==="string"?context.querySelectorAll(el):el}if(el instanceof Air){this.dom=el.dom.slice(0)}else if(!Array.isArray(el)){if(this.dom instanceof NodeList){this.dom=Array.prototype.slice.call(this.dom)}else{this.dom=el instanceof Element||el===window?[el]:[]}}this.slice=Array.prototype.slice}var proto=Air.prototype,air=plug({proto:proto,type:Air});Object.defineProperty(proto,"length",{get:function(){return this.dom.length}});proto.get=function get(index){if(index===undefined){return this.dom}return this.dom[index]};proto.each=function each(cb){this.dom.forEach(cb);return this};air.Air=Air;proto.air=air;module.exports=air})()},{zephyr:14}],3:[function(require,module,exports){function append(){var i,l=this.length,el,args=this.slice.call(arguments);function it(node,index){el.each(function(ins){ins=index<l-1?ins.cloneNode(true):ins;node.appendChild(ins)})}for(i=0;i<args.length;i++){el=this.air(args[i]);this.each(it)}return this}module.exports=function(){this.append=append}},{}],4:[function(require,module,exports){function attr(key,val){var i,attrs,map={};if(!this.length||key!==undefined&&!Boolean(key)){return this}if(key===undefined&&val===undefined){attrs=this.dom[0].attributes;for(i=0;i<attrs.length;i++){map[attrs[i].name]=attrs[i].value}return map}else if(typeof key==="string"&&!val){if(val===null){this.each(function(el){el.removeAttribute(key)});return this}return this.dom[0].getAttribute(key)}else{this.each(function(el){if(typeof key==="object"){for(var z in key){if(key[z]===null){el.removeAttribute(z);continue}el.setAttribute(z,key[z])}}else{el.setAttribute(key,val)}})}return this}module.exports=function(){this.attr=attr}},{}],5:[function(require,module,exports){var attr="class";function addClass(className){if(!className){return this}var classes=className.split(/\s+/);this.each(function(el){var val=el.getAttribute(attr);var names=val?val.split(/\s+/):[];classes.forEach(function(nm){if(!~names.indexOf(nm)){names.push(nm)}});el.setAttribute(attr,names.join(" "))});return this}function hasClass(className){var i,val;for(i=0;i<this.length;i++){val=this.get(i).getAttribute(attr);val=val?val.split(/\s+/):[];if(~val.indexOf(className)){return true}}return false}function removeClass(className){if(!className){this.each(function(el){el.removeAttribute(attr)});return this}var classes=className.split(/\s+/);this.each(function(el){var val=el.getAttribute(attr);if(!val){return}var names=val.split(/\s+/);names=names.filter(function(nm){return~classes.indexOf(nm)?false:nm});el.setAttribute(attr,names.join(" "))});return this}function toggleClass(className){var classes=className.split(/\s+/),name,i;for(i=0;i<classes.length;i++){name=classes[i];if(this.hasClass(name)){this.removeClass(name)}else{this.addClass(name)}}}module.exports=function(){this.addClass=addClass;this.hasClass=hasClass;this.removeClass=removeClass;this.toggleClass=toggleClass}},{}],6:[function(require,module,exports){function create(tag){return document.createElement(tag)}function el(tag,attrs){var n=el.air(create(tag));if(attrs&&n.attr){return n.attr(attrs)}return n}module.exports=function(){el.air=this.air;this.air.create=create;this.air.el=el}},{}],7:[function(require,module,exports){function css(key,val){var style,props;if(!this.length){return this}if(key&&typeof key==="object"){props=key}else if(key&&val){props={};props[key]=val}if(key===undefined){style=window.getComputedStyle(this.dom[0],null);return style}else if(typeof key==="string"&&!val){style=window.getComputedStyle(this.dom[0],null);return style.getPropertyValue(key)}this.each(function(el){el.style=el.style;for(var z in props){el.style[z]=""+props[z]}});return this}module.exports=function(){this.css=css}},{}],8:[function(require,module,exports){function on(nm,cb,capture){this.each(function(el){el.addEventListener(nm,cb,capture)});return this}function off(nm,cb,capture){this.each(function(el){el.removeEventListener(nm,cb,capture)});return this}function trigger(event,bubbles,cancelable,type){bubbles=typeof bubbles===undefined?true:bubbles;cancelable=typeof cancelable===undefined?true:cancelable;type=type||"HTMLEvents";this.each(function(el){var evt;if(document.createEvent){evt=document.createEvent("HTMLEvents");evt.initEvent(event,bubbles,cancelable);return!el.dispatchEvent(evt)}else{evt=document.createEventObject();return el.fireEvent("on"+event,evt)}})}function click(bubbles,cancelable){return this.trigger("click",bubbles,cancelable,"MouseEvents")}module.exports=function(){this.on=on;this.off=off;this.trigger=trigger;this.click=click}},{}],9:[function(require,module,exports){function find(selector){var arr=[],$=this.air,slice=this.slice;this.each(function(el){arr=arr.concat(slice.call($(selector,el).dom))});return $(arr)}module.exports=function(){this.find=find}},{}],10:[function(require,module,exports){function html(markup,outer){if(!this.length){return this}if(typeof markup==="boolean"){outer=markup;markup=undefined}var prop=outer?"outerHTML":"innerHTML";if(markup===undefined){return this.dom[0][prop]}markup=markup||"";this.each(function(el){el[prop]=markup});return this}module.exports=function(){this.html=html}},{}],11:[function(require,module,exports){function parent(){var arr=[],$=this.air,slice=this.slice;this.each(function(el){arr=arr.concat(slice.call($(el.parentNode).dom))});return $(arr)}module.exports=function(){this.parent=parent}},{}],12:[function(require,module,exports){function request(opts,cb){opts=opts||{};opts.method=opts.method||"GET";opts.headers=opts.headers||{};var req,z;req=new XMLHttpRequest;function parse(headers){var output={},i,p,k,v;headers=headers||"";headers=headers.replace("\r","");headers=headers.split("\n");for(i=0;i<headers.length;i++){p=headers[i].indexOf(":");k=headers[i].substr(0,p);v=headers[i].substr(p+1);if(k&&v){k=k.replace(/^\s+/,"").replace(/\s+$/,"");v=v.replace(/^\s+/,"").replace(/\s+$/,"");output[k.toLowerCase()]=v}}return output}function done(){req.onload=null;req.onerror=null;req.ontimeout=null;req.onprogress=null;cb.apply(null,arguments)}if(opts.fields){for(z in opts.fields){req[z]=opts.fields[z]}}for(z in opts.headers){req.setRequestHeader(z,opts.headers[z])}if(opts.mime&&typeof req.overrideMimeType==="function"){req.overrideMimeType(opts.mime)}req.open(opts.method,opts.url);req.onreadystatechange=function(){if(this.readyState===4){done(null,this.responseText,{headers:parse(this.getAllResponseHeaders()),status:this.status},this)}};req.onerror=opts.error||function onError(err){done(err)};req.onload=opts.load;req.ontimeout=opts.timeout;req.onprogress=opts.progress;req.send(opts.data)}module.exports=function(){this.air.request=request}},{}],13:[function(require,module,exports){function text(txt){if(!this.length){return this}if(txt===undefined){return this.dom[0].textContent}txt=txt||"";this.each(function(el){el.textContent=txt});return this}module.exports=function(){this.text=text}},{}],14:[function(require,module,exports){(function(){"use strict";function plug(opts){opts=opts||{};function Component(){}var main,hooks=opts.hooks,proto=opts.proto||Component.prototype;function plugin(plugins){var z,method,conf;for(z in plugins){if(typeof plugins[z]==="function"){method=plugins[z]}else{method=plugins[z].plugin;conf=plugins[z].conf}if(opts.field&&typeof method[opts.field]==="function"){method=method[opts.field]}method.call(proto,conf)}return main}function construct(){var args=Array.prototype.slice.call(arguments);function Fn(){return main.Type.apply(this,args)}Fn.prototype=main.Type.prototype;return new Fn}function hook(){var comp=hook.proxy.apply(null,arguments);for(var i=0;i<hooks.length;i++){hooks[i].apply(comp,arguments)}return comp}function register(fn){if(typeof fn==="function"&&!~hooks.indexOf(fn)){hooks.push(fn)}}main=opts.main||construct;if(Array.isArray(hooks)){hook.proxy=main;main=hook}main.Type=opts.type||Component;main.plugin=proto.plugin=opts.plugin||plugin;if(Array.isArray(hooks)){main.plugin.register=register}proto.main=main;return main}module.exports=plug})()},{}],15:[function(require,module,exports){function mapSeries(list,cb,complete){var item=list.shift(),out=[];function run(item){cb(item,function(err,result){if(err){return complete(err,out)}out.push(result);item=list.shift();if(item){return run(item)}complete(null,out)})}if(item){return run(item)}complete(null,out)}function map(list,cb,complete){var out=[],e;function run(item,index){cb(item,function(err,result){if(e){return}else if(err){e=err;return complete(err,out)}out[index]=result;if(out.length===list.length){return complete(null,out)}})}list.forEach(function(item,index){run(item,index)})}module.exports={map:map,mapSeries:mapSeries}},{}],16:[function(require,module,exports){function Reason(id,meta){for(var k in meta){this[k]=meta[k]}this.id=id}Reason.prototype.toString=function(){return this.id};var reasons={type:new Reason("type"),required:new Reason("required"),pattern:new Reason("pattern"),length:new Reason("length"),instance:new Reason("instanceof"),additional:new Reason("additional"),enumerable:new Reason("enum"),date:new Reason("date"),whitespace:new Reason("whitespace"),min:new Reason("min"),max:new Reason("max")};Reason.reasons=reasons;module.exports=Reason},{}],17:[function(require,module,exports){var plugin=require("zephyr"),format=require("format-util"),Reason=require("./reason");function Rule(opts){if(!(this instanceof Rule)){return new Rule(opts)}for(var k in opts){this[k]=opts[k]}this.reasons=Reason.reasons}function error(message){var msg,err,res,args=Array.prototype.slice.call(arguments,1),reason,tmp;if(message instanceof Reason){reason=message;message=arguments[1];args=args.slice(1)}if(typeof this.rule.message==="function"){tmp=this.rule.message;this.rule.message=null;res=tmp.call(this,message,args);this.rule.message=tmp;if(res instanceof Error){err=res}else{msg=""+res}}else{msg=typeof this.rule.message==="string"?this.rule.message:message||format(require("../messages").default,this.field)}if(typeof this.rule.message==="object"&&reason&&this.rule.message[reason]){msg=this.rule.message[reason]}if(typeof msg==="string"&&arguments.length>1&&!this.rule.message){msg=format.apply(null,[msg].concat(args))}err=err||new Error(msg);err.field=this.field;err.value=this.value;err.parent=this.parent;err.names=this.names;err.key=this.key||err.field;if(!this.key&&this.names&&this.names.length){err.key=this.names.join(".")}if(reason){err.reason=reason}return err}function reason(id,opts){return new Reason(id,opts)}function raise(message){var parameters=[];if(arguments.length>1){parameters=Array.prototype.slice.call(arguments,1)}var err=this.error.apply(this,[message].concat(parameters));this.errors.push(err);return err}function validates(){if(this.isRoot()){return true}else if(this.value===undefined&&!this.rule.required){return false}return this.rule.required||!this.rule.required&&this.source.hasOwnProperty(this.field)}function diff(expected,received){var i,results=received.slice(0);for(i=0;i<results.length;i++){if(~expected.indexOf(results[i])){results.splice(i,1);i--}}if(results.length===0){return false}return results}function isRoot(){return this.source===this.value}Rule.prototype.reason=reason;Rule.prototype.error=error;Rule.prototype.raise=raise;Rule.prototype.format=format;Rule.prototype.isRoot=isRoot;Rule.prototype.validates=validates;Rule.prototype.diff=diff;module.exports=plugin({type:Rule,proto:Rule.prototype})},{"../messages":19,"./reason":16,"format-util":20,zephyr:21}],18:[function(require,module,exports){var iterator=require("./iterator"),format=require("format-util"),Rule=require("./rule");function validateRule(rule){var i;if(typeof rule==="function"||typeof rule.test==="function"){return true}function invalid(){throw new Error("type property must be string or function: "+rule.field)}function isValid(type){return type&&(typeof type==="string"||typeof type==="function")}if(Array.isArray(rule.type)){for(i=0;i<rule.type.length;i++){if(!isValid(rule.type[i])){invalid()}}}else if(!isValid(rule.type)){invalid()}}function Schema(rules,opts){opts=opts||{};if(rules===undefined){throw new Error("Cannot configure a schema with no rules")}if(!rules||typeof rules!=="object"&&typeof rules!=="function"){throw new Error("Rules must be an object")}this.messages(opts.messages||require("../messages"));this.rules=rules}function messages(msg){if(msg!==undefined){this._messages=msg}return this._messages}function validate(source,opts,cb){if(typeof opts==="function"){cb=opts;opts=null}opts=opts||{};if(source===undefined&&!opts._deep){throw new Error("Cannot validate with no source.")}else if(typeof cb!=="function"){throw new Error("Cannot validate with no callback.")}if(opts.bail){opts.first=opts.single=true}var series=[],k,z,matcher,matchtmp,fields=this.rules.fields,state=opts.state||{},func=opts.parallel?iterator.map:iterator.mapSeries,messages=opts.messages||this.messages();for(k in fields){if(typeof fields[k]==="object"&&fields[k].match instanceof RegExp){matcher=fields[k];delete fields[k];for(z in source){if(matcher.match.test(z)){matchtmp=Schema.clone(matcher);delete matchtmp.match;fields[z]=getRule(matchtmp,z,source[z])}}}}this.rules=opts._deep?this.rules:clone(this.rules);series=Array.isArray(this.rules)?this.rules:[this.rules];function getRule(rule,field,value){var assign;value=value||source;rule.field=field||opts.field||"source";if(typeof rule.resolve==="function"){rule=rule.resolve.call(value)}if(value===undefined&&typeof rule.placeholder==="function"){value=assign=rule.placeholder()}if(typeof rule.transform==="function"){value=assign=rule.transform(value)}if(assign&&opts.parent&&rule.field){opts.parent[rule.field]=assign}if(typeof rule.type==="function"){rule.Type=rule.type;rule.type="object"}validateRule(rule);if(typeof rule.test!=="function"&&Array.isArray(rule.type)){rule.test=Rule.types}if(typeof rule==="function"){rule.test=rule}else if(typeof rule.test!=="function"){rule.test=Rule[rule.type]}rule.names=opts._names||[];if(rule.field&&opts._deep){rule.names=rule.names.concat(rule.field)}rule.parent=opts.parent||source;rule.value=value;rule.source=opts._source||source;if(typeof rule.test!=="function"){throw new Error(format("Unknown rule type %s",rule.type))}return rule}series=series.map(function(rule){return getRule(rule)});func(series,function(rule,callback){var vars={},k,scope,isDeep;for(k in rule){if(Rule.Type.prototype[k]===undefined){vars[k]=rule[k]}}if(opts.vars){for(k in opts.vars){vars[k]=opts.vars[k]}}vars.rule=rule;vars.field=rule.field;vars.value=rule.value;vars.source=rule.source;vars.names=rule.names;vars.errors=[];vars.state=state;vars.messages=messages;scope=Rule(vars);isDeep=(rule.type==="object"||rule.type==="array")&&typeof rule.fields==="object";isDeep=isDeep&&(rule.required||!rule.required&&rule.value);function onValidate(err){if(err){return callback(err,scope.errors)}if(!isDeep){return callback(err,scope.errors)}else{var keys=opts.keys||Object.keys(rule.fields);func(keys,function iterator(key,cb){var options=clone(opts),descriptor=rule.fields[key],value=rule.value[key],schema,i,len,tmp;options.state=state;if(descriptor.type==="array"&&typeof descriptor.values==="object"){len=Array.isArray(descriptor.values)?descriptor.values.length:Array.isArray(value)?value.length:0;if(len){descriptor.fields={}}if(!Array.isArray(descriptor.values)){for(i=0;i<len;i++){descriptor.fields[i]=descriptor.values}}else{for(i=0;i<len;i++){descriptor.fields[i]=descriptor.values[i]}}}if(descriptor.required&&value===undefined){tmp=Rule({field:key,rule:descriptor,names:rule.names,key:rule.names.concat(key).join("."),errors:scope.errors});tmp.raise(tmp.reasons.required,messages.required,key);return cb()}schema=new Schema(descriptor,{messages:options.messages});options.field=key;options.parent=rule.value;options._source=source;options._names=rule.names;options._deep=true;schema.validate(value,options,function(err,res){if(res&&res.errors.length){scope.errors=scope.errors.concat(res.errors)}cb(err,null)})},function(err){if(opts.first&&scope.errors&&scope.errors.length){return complete(err,scope.errors,opts,cb)}callback(err,scope.errors)})}}rule.test.call(scope,onValidate)},function(err,results){complete(err,results,opts,cb)})}function complete(err,results,opts,callback){var i,field,errors=[],fields={};for(i=0;i<results.length;i++){errors=errors.concat(results[i])}if(errors.length){if(opts.single){errors=errors.slice(0,1)}for(i=0;i<errors.length;i++){field=errors[i].key;fields[field]=fields[field]||[];fields[field].push(errors[i])}}callback(err,!errors.length?null:{errors:errors,fields:fields})}function clone(source,target){var k,v;function isComplex(obj){return Array.isArray(obj)||obj&&typeof obj==="object"&&!(obj instanceof RegExp)}if(!isComplex(source)){return source}target=target||(Array.isArray(source)?[]:{});for(k in source){v=source[k];if(isComplex(v)){target[k]=Array.isArray(v)?[]:{};clone(v,target[k])}else{target[k]=v}}return target}Schema.prototype.messages=messages;Schema.prototype.validate=validate;Schema.clone=clone;Schema.plugin=Rule.plugin;module.exports=Schema},{"../messages":19,"./iterator":15,"./rule":17,"format-util":20}],19:[function(require,module,exports){var messages={"default":"error on field %s",required:"%s is required","enum":"%s must be one of %s",whitespace:"%s cannot be empty",additional:"extraneous fields (%s) found in %s",date:{format:"%s date %s is invalid for format %s",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s","null":"%s is not %s","function":"%s is not a %s",instance:"%s is not an instance of %s",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s","boolean":"%s is not a %s",integer:"%s is not an %s","float":"%s is not a %s",regexp:"%s is not a valid %s",multiple:"%s is not one of the allowed types %s"},"function":{len:"%s must have exactly %s arguments",min:"%s must have at least %s arguments",max:"%s cannot have more than %s arguments",range:"%s must have arguments length between %s and %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"}};module.exports=messages},{}],20:[function(require,module,exports){function format(fmt){var re=/(%?)(%([jds]))/g,args=Array.prototype.slice.call(arguments,1);if(args.length){fmt=fmt.replace(re,function(match,escaped,ptn,flag){var arg=args.shift();switch(flag){case"s":arg=""+arg;break;case"d":arg=Number(arg);break;case"j":arg=JSON.stringify(arg);break}if(!escaped){return arg}args.unshift(arg);return match})}if(args.length){fmt+=" "+args.join(" ")}fmt=fmt.replace(/%{2,2}/g,"%");return""+fmt}module.exports=format},{}],21:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14}],22:[function(require,module,exports){"use strict";var $=require("air"),Schema=require("async-validate"),descriptor=require("../../lib/schema/quote");$.plugin([require("air/append"),require("air/attr"),require("air/class"),require("air/create"),require("air/css"),require("air/event"),require("air/find"),require("air/html"),require("air/parent"),require("air/request"),require("air/text")]);function Application(opts){var supported=typeof XMLHttpRequest!=="undefined";opts=opts||{};this.opts=opts;this.validator=new Schema(descriptor);if(!supported){$(".browser-update").css({display:"block"})}$("a.refresh").on("click",random.bind(this))}function random(e){e.preventDefault();var icon=$(e.target).find("i"),container=$(".quotation"),start=(new Date).getTime();icon.addClass("fa-spin");function onResponse(err,res){var doc;if(err){return console.error(err)}if(res){doc=JSON.parse(res)}container.find("blockquote").text(doc.quote);container.find("cite").html("&#151; ").append($.el("a",{href:doc.link,title:doc.author+" ("+doc.domain+")"}).text(doc.author));var nav=$("footer nav"),href="/inspire/"+doc._id;nav.find("a.love, a.star, a.permalink").attr({href:href});function complete(){icon.removeClass("fa-spin")}if((new Date).getTime()-start>1e3){complete()}else{setTimeout(complete,1e3)}}$.request({url:this.opts.api+"/quote/random"},onResponse.bind(this))}module.exports=Application},{"../../lib/schema/quote":1,air:"air","air/append":3,"air/attr":4,"air/class":5,"air/create":6,"air/css":7,"air/event":8,"air/find":9,"air/html":10,"air/parent":11,"air/request":12,"air/text":13,"async-validate":18}],23:[function(require,module,exports){var Application=require("./app");module.exports=new Application(window.app)},{"./app":22}],air:[function(require,module,exports){module.exports=require("./lib/air")},{"./lib/air":2}]},{},[23]);