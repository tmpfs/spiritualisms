#!/usr/bin/env bash

# Use the --dry-run option to test what would be done

name="muji";
disc="${1:-QUARTZ}"
src="${2:-$PWD}";
volume="/media/${name}/${disc}";
dest="${volume}";
dir=$(basename $src);
final="${dest}/${dir}";

# 	--dry-run \

rsync -avz \
	--delete \
	--progress \
	--exclude 'node_modules' \
	--exclude 'coverage' \
	--exclude 'target' \
	--exclude 'www/public/files/*.*' \
	--include 'www/public/files/.gitignore' \
  --exclude 'www/public/assets/js/*.*' \
  --include 'www/public/assets/js/.gitignore' \
	--exclude '*.log' \
	--exclude '*.bak' \
	--exclude '*.rdb' \
	"$src" "$dest";

if [ -d "${final}" ]; then
	echo `date` > "${final}/backup.date.log";
fi
